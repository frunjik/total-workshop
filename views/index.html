@{layout('')}
@{title('Files')}

<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=10" />
	<meta name="format-detection" content="telephone=no" />
	<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no, viewport-fit=cover" />
	<meta name="robots" content="all,follow" />
	<link rel="stylesheet" href="https://cdn.componentator.com/spa.min@18.css" />
	<script src="https://cdn.componentator.com/spa.min@18.js"></script>
	@{import('meta', 'head', 'ui.css + default.css', 'default.js + ui.js', 'favicon.ico')}
</head>
<body data---="exec">

	<div data---="LAZY message__null__style:2"></div>
	<div data---="LAZY menu__null__style:2"></div>
	<div data---="LAZY floatinginput"></div>
	<div data---="LAZY spotlight"></div>
	<div data---="LAZY approve"></div>
	<div data---="LAZY filebrowser"></div>
	<div data---="LAZY clipboard"></div>

	<div data---="mainprogress__common.progress"></div>
	<div data---="loading" class="hidden"></div>
	<div data---="shortcuts"></div>

	<nav>
		<a href="/" class="R"> Main </a>
		<a href="/designer" class="R">| Designs </a>
		<a href="/explorer" class="R">| Edit </a>
	</nav>

	<!-- <div data---="part__common.editor__if:editor;url:/parts/editor.html"></div> -->
	<div data---="part__common.page__if:main;url:/parts/browser.html"></div>
	<div data---="part__common.page__if:browser;url:/parts/browser.html"></div>
	<div data---="part__common.page__if:explorer;url:/parts/explorer.html"></div>
	<div data---="part__common.page__if:designer;url:/parts/designer.html"></div>

	@{if user.sa}
	<div data---="importer__common.form__if:settingsform;url:/forms/settings.html"></div>
	@{fi}

	@{json(user, 'userdata')}

	<script>
		var common = {};

		DEF.api = '/api/';
		NAV.clientside('.R');
		ENV('ts', 'yyyy-MM-mm HH:mm');

		var user = PARSE('#userdata');

		common.page = 'designer';
		common.editor = 'editor';

		ON('@flag showloading', function() {
			SETTER('loading/show');
		});

		ON('@flag hideloading', function() {
			SETTER('loading/hide', 500);
		});

		ROUTE('/browse', function() {
			SET('common.page', 'main');
		});

		ROUTE('/explorer/', function() {
			SET('common.page', 'explorer');
		});

		ROUTE('/designer/', function() {
			SET('common.page', 'designer');
		});


		SETTER(true, 'shortcuts/register', 'F1', AEXEC('browser/search'));
		SETTER(true, 'shortcuts/register', 'F4', AEXEC('explorer/save'));

	</script>

</body>
</html>